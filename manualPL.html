<!DOCTYPE html>
<html lang="pl-PL">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ServerBot Manual</title>
    <link rel="icon" type="image/x-icon" href="Files/favicon.ico">
    <meta name="description" content="ServerBot v1.10.1 User Manual [PL]">
    <meta name="author" content="Kamile320">

    <style>
        body {
            background-image: linear-gradient(to right, rgb(141, 205, 226), rgb(62, 62, 255), rgb(3, 165, 3));
            font-family: Arial;
        } 

        h1 {
            margin: 0;
            font-family: Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif;
        }

        .card {
            background-color: rgb(241, 220, 174);
            margin: 50px auto;
            width: 80%;
            height: auto;
            padding: 20px;
            box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);
            transition: 0.3s;
        }

        .card:hover {
            box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2);
        }
    </style>
</head>
<body>
    <div class="card">
        <font size="6">
            <center><h1><i>ServerBot User Manual v1.10.1</i></h1></center>
        </font>
        <hr style="height: 5px; background: rgb(5, 5, 99); border: 2px;">

        <iframe align="right" src="https://discord.com/widget?id=1243950731954749450&theme=dark" width="350" height="500" allowtransparency="true" frameborder="0" sandbox="allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts"></iframe>

        <a href="https://github.com/kamile320/ServerBot">ServerBot</a> - Bot Discordowy rozwijany przez <b><u>Kamile320</u></b> posiadający funkcje jak:<br>
        <ul>
            <li>Administracja Serwera</li>
            <li>Odtwarzanie muzyki z plików hosta i linków YouTube'a</li>
            <li>Zarządzanie Komputerem Hosta</li>
            <li>Wykonywanie skryptów bash</li>
            <li>Logowanie wiadomości</li>
            <li>Tworzenie wątków</li>
            <li>Zarządzanie Plikami i Katalogami</li>
            <li>Obsługa bazy danych (SQLite3)</li>
            <li>Rozmowa ze Sztuczną Inteligencją (Google Gemini)</li>
            <li>I wiele więcej</li>
        </ul>
        
        <br>

        <h3>Spis Treści</h3>
        <ol>
            <li><a href="#dirs">Struktura Katalogowa</a></li>
            <li><a href="#start">Uruchomienie</a></li>
            <li><a href="#autostart">Uruchamianie Automatyczne</a></li>
            <li><a href="#token">Tokeny</a></li>
            <li><a href="#admin">UserID i Administratorzy bota</a></li>
            <li><a href="#ffmpeg">Windows - instalacja FFmpeg</a></li>
            <li><a href="#modules">Moduły/Rozszerzenia Bota</a></li>
            <li><a href="#ai">Komenda .ai</a></li>
            <li><a href="#yt">Komendy muzyczne</a></li>
            <li><a href="#db">Baza Danych (SQLite3)</a></li>
            <li><a href="#comma">Komendy</a></li>
        </ol>

        <br>

        <h3 id="dirs">Struktura Katalogowa:</h3>

        <ol>
            <li><b>ServerBot.py</b> - Główny plik skryptu</li>
            <li><b>setup.bat</b> - Plik instalujący wymagane biblioteki pythona (Windows)</li>
            <li><b>setup.sh</b> - Menu operacyjne: uruchamianie bota, instalowanie wymaganych biblioteki itp. (wymaga zainstalowania komendy "dialog")</li>
            <li><b>Logs.txt</b> - Plik z Dziennikiem zdarzeń bota na serwerze</li>
            <li><b>manualPL.html</b> - Manual Bota [PL]</li>
            <li><b>manualEN.html</b> - Manual Bota [EN]</li>
            <li><b>Media</b> - Domyślny katalog/biblioteka plików muzycznych</li>
            <li><b>ACL</b> - Dziennik wiadomości użytkowników (po włączeniu <a href="#ACL">ACL</a>)</li>
            <li><b>.env</b> - Specjalny plik do przechowywania Tokenów Bota</li>
            <li><b>.venv</b> - Wirtualne Środowisko Pythona (Po użyciu setup.sh - opcja 4)</li>
            <li><b>tempDB.txt</b> - Plik z zawartością bazy danych (po użyciu .showdb)</li>
            <li>
                <b>Files</b> - Katalog z resztą plików Bota 
                <ul>
                    <li><b>favicon.ico</b> - Ikona Manuala</li>
                    <li><b>updates.txt</b> - Plik z listą ostatnich aktualizacji</li>
                    <li><b>Logs.txt</b> - Kopia Logów Bota</li>
                    <li><b>autorun.sh</b> - Po użyciu <a href="#autostart">.mkservice</a></li>
                    <li><b>serverbot.db</b> - Baza danych SQLite3</li>
                    <li><b>systemd_add.py</b> - Skrypt do dodawania bota do startu wraz z systemem poprzez systemd</li>
                    <li>Inne Pliki (zdjęcia, nagrania, itp.)</li>
                    <li><b>setup</b> - Pliki konfiguracyjne</li>
                    <ul>
                        <li><b>setuplib.sh</b> - Instalacja Bibliotek</li>
                        <li><b>mkvenv.sh</b> - Utworzenie <a href="#autostart">venv</a></li>
                        <li><b>requirement.txt</b> - Plik z listą bibliotek pythonado instalacji</li>
                    </ul>
                </ul>
            </li>
        </ol>
        
        <br>

        <p align="right">Zdj.1 - Uruchomienie skryptu</p>
        <a href="Files/UbuntuSB.png"><img align="right" src="Files/UbuntuSB.png" width="40%" height="40%"></a>
        
        <h3 id="start">Pierwsze uruchomienie:</h3>
        <h5>Bot do uruchomienia wymaga:</h5>
        <ul type="square">
            <li>Python 3.9 lub nowszy</li>
            <li>Discord.py 2.6.4 lub nowszy</li>
            <li>Połączenie z internetem</li>
            <li>Zainstalowane wymagane biblioteki pythona (patrz - zawartość setup.sh/setuplib.sh/requirements.txt)</li>
            <li>Dodanie do środowiska PATH plików FFmpeg - Tylko Windows (zobacz YT)</li>
            <li>System Operacyjny Linux(rekomendowany) / Windows / MacOS - Najlepiej 64bit</li>
            <li>setup.sh - wymaga komendy "dialog"</li>
        </ul>

        <br>
        
        Należy poprzez IDE, terminal albo inny program uruchomić skrypt - python3 lub setup.sh.<br>
        Jeżeli coś pójdzie nie tak, Bot powinien dać znać w czym problem<br>
        i poprosić o zatwierdzenie wykonania korekty albo porzuci uruchomienie/instalację.<br>
        Po uruchomieniu skryptu, Bot powinien się połączyć z Discordem i być gotowy do pracy.<br>
        [!] Jest możliwość zainstalowania bota poprzez plik .deb - należy pamiętać że bot zainstaluje się w /usr/share/serverbot. 
        Używaj komendy serverbot z sudo, jeśli chcesz skonfigurować <a href="#autostart">autostart</a>.<br>

        <br>

        Aktualne Komendy Bota można zobaczyć używając komendy .help

        <br>

        <h3 id="autostart">Uruchamianie Automatyczne:</h3>

        Korzystając z Bota może zechcesz aby automatycznie uruchamiał się wraz z systemem operacyjnym (Linux).<br>
        Aby to łatwo umożliwić istnieje komenda .mkservice<br>
        Po wpisaniu komendy trzeba podać dodatkową wartość:<br><br>
        
        <b>def</b> -> tworzy domyślny plik autorun.sh w katalogu <a href="#dirs">Files</a>. Działa głównie na systemach opartych na Ubuntu <b>22.04</b> (Nie korzysta z utworzonego venv)<br><br>

        <b>venv</b> -> czasem przy instalacji modułów za pomocą pip3 może wyskoczyć błąd <i>externally managed pip</i>.<br>
        W tym przypadku należy utworzyć Wirtualne Środowisko Pythona (Virtual Environment/Venv)<br>
        Jeśli jeszcze go nie utworzyłeś - rekomendowane jest utworzenie go w głównym katalogu Bota (ServerBot).<br><br>
        Przykład: .mkservice venv <- wykonujesz tą komendę na Discordzie gdy skrypt działa w głównym katalogu Bota.<br>
        UWAGA! Bot (a raczej setup.sh) jest przystosowany do nazwy katalogu z wirtualnym środowiskiem o nazwie ".venv".<br>
        Jeśli utworzyłeś ręcznie venv z inną nazwą katalogu, bot może się nie uruchomić!<br>
        Zalecane jest używanie odpowiednich opcji z setup.sh -> Bez problemu wszystko się zainstaluje i skonfiguruje jak trzeba.<br>
        Aby autostart zadziałał, należy ustawić pliki bota z uprawnieniami odczytu/zapisu/wykonania na 775 (r-x dla wszystkich, rwx dla właściciela i grupy) jeśli nie posiadają takich uprawnień.<br>
        Rekomenduję przenieść pliki Bota do katalogu /ServerBot (żeby nie był w innych katalogach). Nie instaluj bota w katalogu domowym jeśli chcesz uruchamiać go wraz z systemem.<br><br>

        <b><i>Jak utworzyć venv:</i></b><br>
        <ol>
            <li>znajdując się w głównym katalogu bota wpisz: <b>python3 -m venv .venv</b></li>
            <li>aby aktywować venv: <b>source .venv/bin/activate</b> (jako root)</li>
            <li>sprawdź wersję i lokalizację: <b>which python</b></li>
            <li>gdy już jesteś w venv, uruchom <b>setup.sh</b></li>
            <li>aby wyjść z venv wpisz w termianalu: <b>deactivate</b></li>
            <li>albo prościej - użyj opcji 4 w <b>setup.sh</b></li>
        </ol>

        <p>Pełna dokuntacja venv <a href="https://packaging.python.org/en/latest/guides/installing-using-pip-and-virtual-environments/">tutaj</a>.</p>

        <p align="right">Zdj. 2 - opcje setup.sh</p>
        <a href="Files/setupSB.png"><img align="right" src="Files/setupSB.png" width="35%" height="35%"></a>

        <h3 id="token">Tokeny</h3>
        Bot korzysta z tokenów: API Discorda, Gemini oraz z ID użytkowników.<br>
        Aby bot się uruchomił należy wypełnić odpowiednimi danymi plik <b>.env</b><br><br>
        <b>Schemat:</b><br>
        TOKEN='discord token'<br>
        admin_usr = ['twoje ID']<br>
        <br>
        #AI<br>
        AI_token='gemini token (do komendy .ai)'<br>
        aimodel = 'gemini-2.5-flash' -> wybrany model językowy gemini<br>
        instructions = ['Instrukcje dla modelu językowego']<br>
        <br>
        #Music<br>
        JoinLeaveSounds = True/False -> Odtwarzanie dźwięku przy dołączaniu/wychodzeniu z kanału głosowego<br>
        ForceMediaDir = False -> Blokuje użytkowników do korzystania z plików muzycznych JEDYNIE z biblioteki muzycznej (domyślnie katalog Media)<br>
        <br>
        #Command_dscserv<br>
        dscserv_link = 'Link do serwera Discord'<br>
        <br>
        #Service_list<br>
        service_monitor = True/False -> włącza komendę .service<br>
        service_list = 'Lista usług systemd do monitorowania poprzez discorda'<br>
        <br>
        #Command_addbot
        addstable = 'stable_link of Discord Bot'<br>
        addtesting = 'testing_link of Discord Bot'<br>
        <br>
        #Modules<br>
        showmodulemessages = True/False -> wyświetla informacje o włączonych modułach Bota<br>
        ACLmodule = True/False -> Uruchamia funkcję <a href="#ACL">AdvancedChannelListener</a><br>
        <br>
        #ExtendedErrorMessages<br>
        extendedErrMess = True/False -> włącza/wyłącza rozszerzone komunikaty błędów<br>
        
        <br>

        <h4 id="#admin">ID użytkownika i Administratorzy bota</h4>
        Niektóre komendy korzystają z funkcji i danych związanych z twoim systemem operacyjnym,<br>
        więc wymagają uprawnień administratora do uruchomienia - chyba nie chcesz żeby ktoś ci usunął system!<br>
        Aby te komendy wykonać, należy podać w <b>admin_usr</b> ID uprawnionych użytkowników do wykonywania tych komend - to muszą być zaufane osoby, a najlepiej tylko ty!<br>
        Niektóre komendy pozwalają na ingerowanie w serwer itp. - takie komendy są przeznaczone dla moderatorów bota; można ich dodać poprzez nadanie im uprawnień moderatora w bazie danych.<br>
        Należy użyć komendy <b>.db op {userID}</b> - nada status moderatora bota danemu użytkownikowi. Analogicznie odbieranie uprawnień to <b>.db deop {userID}</b><br>
        To mogą być zaufani moderatorzy Serwera. Jeśli nikt nie jest dodany jako moderator, tylko użytkownicy z <b>admin_usr</b> będą mogli korzystać z komend moderatora.<br>

        <br>

        <h3 id="ffmpeg">Windows - instalacja FFmpeg</h3>
        <a href="https://www.ffmpeg.org/download.html">FFmpeg</a> odpowiada za odtwarzanie muzyki na Kanałach Głosowych. Na Windowsie instalacja FFmpeg wygląda inaczej niż na Linuksie.<br>
        Należy ręcznie pobrać pliki FFmpeg i dodać je do zmiennej środowiskowej PATH według poniższych kroków:<br>
        <ol>
            <li>Pobierz plik .zip programu FFmpeg z oficjalnej strony <a href="https://github.com/BtbN/FFmpeg-Builds">GitHub</a>, najlepiej z podanego w skrypcie <a href="https://github.com/BtbN/FFmpeg-Builds/releases/download/latest/ffmpeg-master-latest-win64-gpl-shared.zip">linku</a>.</li>
            <li>Wypakuj pliki tak, aby pliki .exe znajdowały się w lokalizacji C:\ffmpeg\bin</li>
            <li>Otwórz Menu Start i wyszukaj 'Zmienne środowiskowe' - wybierz 'Edytuj zmienne środowiskowe systemu'</li>
            <li>Wybierz zmienną 'Path' w 'Zmiennych Użytkownika/Systemu' i kliknij 'Edytuj'</li>
            <li>Kliknij 'Nowy' i dodaj 'C:\ffmpeg\bin' (bez cudzysłowów)</li>
            <li>Kliknij OK aby zamknąć wszystkie okna</li>
            <li>Uruchom ponownie komputer aby zastosować zmiany</li>
        </ol>
        Po wykonaniu tych kroków, FFmpeg powinien być poprawnie zainstalowany i gotowy do użycia przez Bota.<br>

        <br>

        <h3 id="modules">Moduły/Rozszerzenia Bota</h3>

        Bot posiada moduły/rozszerzenia rozszerzające funkcje, które można włączyć lub wyłączyć w pliku .env<br>
        Moduły są także dostępne jako osobne repozytoria (Boty Discord) na GitHubie.<br>
        <ul type="square">
            <li>
                <a id="ACL" href="https://github.com/kamile320/AdvancedChannelListener"><b>AdvancedChannelListener</b></a> - rejestruje wiadomości użytkowników na serwerze i zapisuje je w pliku ACL/[DiscordUserID].txt oraz wszystkie wiadomości w ACL/default/message.txt<br>
                Przydatny do monitorowania użytkowników na serwerze i weryfikowania kto jest kim. Może łamać prywatność użytkowników, więc używaj z rozwagą i na własną odpowiedzialność.<br>
                Jeśli nie zamierzasz używać tego modułu - ustaw w .env ACLmodule = 'False' (ustwaione domyślnie).
            </li>
            <li>
                <b>.service</b> - komenda pozwalająca na podgląd statusu usług systemctl na serwerze hostującym bota. Włącz ją w pliku .env ustawiając service_monitor = True oraz wpisując listę usług do service_list.
            </li>
        </ul>

        <br>

        <h3 id="ai">Komenda .ai</h3>
        Komenda .ai pozwala na rozmowę ze sztuczną inteligencją. Wykorzystuje API Gemini firmy Google.<br>
        Wystarczy zdobyć token gemini (na stronie <a href="https://ai.google.dev/">Google AI dev</a>) i wpisać go do pliku .env w polu 'AI_token'.<br>
        W pliku .env możesz ustawić model językowy (domyślnie gemini-2.5-flash) w polu 'aimodel', oraz instrukcje dla modelu w polu 'instructions'.<br>
        Rekomenduję zostawić domyślną instrukcję ograniczającą limit odpowiedzi do 1500 znaków - długa odpowiedź może nie zostać wysłana na kanał discord i spowodować błąd.<br>

        <br>

        <h3 id="yt">Komendy muzyczne</h3>
        Bot posiada możliwość odtwarzania muzyki na kanałach głosowych na dwa sposoby:
        <ol>
            <li>
                <b>Odtwarzanie lokalnych plików muzycznych</b> - możesz poprzez komendę .play odtwarzać pliki muzyczne z komputera na którym bot jest hostowany. 
                Oczywiście bot musi mieć dostep do katalogu i plików które podajesz. Pamiętaj, jeśli plik nie jest w tym samym katalogu w którym aktualnie się znajduje bot, musisz podać pełną ścieżkę do pliku. 
                Możesz "zamknąć" bota do pojedynczego katalogu z którego będzie mógł wykorzystywać pliki muzyczne - ustaw ForceMediaDir na True w pliku .env<br>
                W ServerBot.py możesz zmienić domyślny katalog biblioteki muzycznej (zmienna medialib). Gdy ForceMediaDir jest włączony, jest dostępna komenda .library wyświetlająca dostępne pliki z biblioteki muzycznej.<br>
                ForceMediaDir nie wpływa na ogólną możliwość poruszania się bota po katalogach. 
            </li>
            <li>
                <b>Odtwarzanie muzyki z YouTube</b> - możesz odtwarzać muzykę poprzez .ytplay, podając link do filmu z YouTube'a (.ytplay url {youtube_url}), albo wyszukując muzykę po tytule (.ytplay search {tytuł filmu/muzyki}).<br>
                Możesz także użyć komendy .ytsearch {tytuł} żeby wyszukać film/muzykę na YT i otrzymać pierwszy znaleziony wynik.<br>
            </li>
        </ol>
        Muzykę odtwarzaną na kanale głosowym możesz wstrzymać (.pause), wznowić (.resume) albo całkowicie zatrzymać (.stop).<br>

        <br>

        <h3 id="db">Baza Danych (SQLite3)</h3>
        Bot korzysta z bazy danych SQLite3 do przechowywania informacji o użytkownikach takich jak:<br>
        <ul type="square">
            <li>ID użytkownika</li>
            <li>Status użytkownika (Moderator itp.)</li>
            <li>Inne dane związane z użytkownikami (w przyszłości)</li>
        </ul>
        Baza danych znajduje się w katalogu <a href="#dirs">Files</a> o nazwie 'serverbot.db'. Bot automatycznie tworzy bazę danych i zbiera dane przy każdej wysłanej wiadomości na serwerze.<br>
        Jest to wymagane do poprawnego działania funkcji wykorzystujących bazę danych, takie jak: komendy moderatora.<br>
        W przyszłości planowane jest dodanie więcej funkcji wykorzystujących bazę danych, niekoniecznie wykorzystujących ID użytkowników.<br>
        Poniższe komendy pozwalają zarzadzać bazą danych z poziomu Discorda:<br>
        <ul type="square">
            <li><b>.db register {userID} {username}</b> - ręcznie rejestruje użytkownika w bazie danych</li>
            <li><b>.db remove {userID}</b> - usuwa użytkownika z bazy danych</li>
            <li><b>.db op {userID}</b> - nadaje status moderatora bota danemu użytkownikowi</li>
            <li><b>.db deop {userID}</b> - odbiera status moderatora bota danemu użytkownikowi</li>
            <li><b>.db select {userID}</b> - wyświetla dane użytkownika o podanym ID</li>
            <li><b>.db setnickname {nickname} {userID}</b> - ustawia nick użytkownika w bazie danych; jeśli nie podano ID, ustawia nick dla użytkownika wywołującego komendę</li>
            <li><b>.showdb</b> - zapisuje zawartość bazy danych do pliku tempDB.txt i wysyła jako odpowiedź</li>
        </ul>

        <br>

        <h3 id="comma">Podstawowe Komendy:</h3>
        <table border>
            <tr valign="top" align="center">
                <td>
                    ======Chat======<br>
                    hello<br>
                    bye<br>
                    hi<br>
                    hello_there<br>
                </td>

                <td>
                    =========Converter=========<br>
                    binary {dec. number}<br>
                    hexa {dec. number}<br>
                    convert {type} {number}<br>
                </td>

                <td>
                    ========Fun========<br>
                    random<br>
                    banner<br>
                    botbanner<br>
                    blankthing<br>
                    apple<br>
                    ai<br>
                    badge<br>
                </td>

                <td>
                    ======Admin======<br>
                    ShutDown<br>
                    copylog<br>
                    bash<br>
                    rebuild<br>
                    mkshortcut<br>
                    mkservice {mode}<br>
                    service<br>
                    pingip<br>
                    module<br>
                    db<br>
                    showdb<br>
                </td>
            </tr>
            <tr valign="top" align="center">
                <td>
                    =====BotInfo=====<br>
                    manual {web/local}<br>
                    credits<br>
                    time<br>
                    ping<br>
                    release<br>
                    next_update<br>
                </td>

                <td>
                    ========FileManager========<br>
                    cd {directory}<br>
                    dir {mode}<br>
                    file {mode} {filename}<br>
                    touch {file} {content}<br>
                </td>

                <td>
                    ====VoiceChannel====<br>
                    join<br>
                    leave<br>
                    play {file dir}<br>
                    ytplay {type} {link}<br>
                    ytsearch<br>
                    stop<br>
                    pause<br>
                    resume<br>
                    waiting<br>
                </td>

                <td>
                    =====ModOnly=====<br>
                    testbot<br>
                    testos<br>
                    disks<br>
                    delete<br>
                    cleaner<br>
                    webreq<br>
                    kick<br>
                    ban<br>
                    unban<br>
                    invitegen<br>
                    echo<br>
                </td>
            </tr>
        </table>
    </div>
</body>
</html>