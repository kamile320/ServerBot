<!DOCTYPE html>
<html lang="pl-PL">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ServerBot Manual</title>
    <link rel="icon" type="image/x-icon" href="Files/favicon.ico">
    <meta name="description" content="ServerBot 1.9.3 User Manual [PL]">
    <meta name="author" content="Kamile320">

    <style>
        body {
            background-image: linear-gradient(to right, rgb(141, 205, 226), rgb(62, 62, 255), rgb(3, 165, 3));
            font-family: Arial;
        } 

        h1 {
            margin: 0;
            font-family: Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif;
        }

        .card {
            background-color: rgb(241, 220, 174);
            margin: 50px auto;
            width: 80%;
            height: auto;
            padding: 20px;
            box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);
            transition: 0.3s;
        }

        .card:hover {
            box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2);
        }
    </style>
</head>
<body>
    <div class="card">
        <font size="6">
            <center><h1><i>ServerBot User Manual v1.9.3</i></h1></center>
        </font>
        <hr style="height: 5px; background: rgb(5, 5, 99); border: 2px;">

        <iframe align="right" src="https://discord.com/widget?id=1243950731954749450&theme=dark" width="350" height="500" allowtransparency="true" frameborder="0" sandbox="allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts"></iframe>

        <a href="https://github.com/kamile320/ServerBot">ServerBot</a> - Bot Discordowy rozwijany przez <b><u>Kamile320</u></b> umożliwiający:<br>
        <ul>
            <li>Słuchanie muzyki z plików hosta i linków YouTube'a</li>
            <li>Administracja Serwera</li>
            <li>Tworzenie wątków</li>
            <li>Zarządzanie Komputerem Hosta (+ Diagnostyka)</li>
            <li>Zarządzanie Plikami i Katalogami</li>
            <li>Wiele więcej</li>
        </ul>
        
        <br>

        <h3>Spis Treści</h3>
        <ol>
            <li><a href="#dirs">Struktura Katalogowa</a></li>
            <li><a href="#start">Uruchomienie</a></li>
            <li><a href="#autostart">Uruchamianie Automatyczne</a></li>
            <li><a href="#token">Tokeny</a></li>
            <li><a href="#ffmpeg">Windows - instalacja FFmpeg</a></li>
            <li><a href="#modules">Moduły/Rozszerzenia Bota</a></li>
            <li><a href="#ai">Komenda .ai</a></li>
            <li><a href="#comma">Komendy</a></li>
        </ol>

        <br>

        <h3 id="dirs">Struktura Katalogowa:</h3>

        <ol>
            <li><b>ServerBot.py</b> - Główny plik skryptu</li>
            <li><b>setup.bat</b> - Plik instalujący wymagane biblioteki pythona (Windows)</li>
            <li><b>setup.sh</b> - Menu operacyjne: uruchamianie bota, instalowanie wymaganych biblioteki itp. (wymaga zainstalowania komendy "dialog")</li>
            <li><b>Logs.txt</b> - Plik z Dziennikiem zdarzeń bota na serwerze</li>
            <li><b>manual.html</b> - Manual Bota</li>
            <li><b>Media</b> - Katalog z Domyślnymi Muzykami/Dźwiękami</li>
            <li><b>ACL</b> - Dziennik wiadomości użytkowników (po włączeniu <a href="#ACL">ACL</a>)</li>
            <li><b>.env</b> - Specjalny plik do przechowywania Tokenów Bota</li>
            <li><b>.venv</b> - Wirtualne Środowisko Pythona (Po użyciu setup.sh - opcja 4)</li>
            <li>
                <b>Files</b> - Katalog z wymaganymi (i nie) plikami Bota 
                <ul>
                    <li><b>favicon.ico</b> - Ikona Manuala</li>
                    <li><b>updates.txt</b> - Plik z listą ostatnich aktualizacji</li>
                    <li><b>Logs.txt</b> - Kopia Logów Bota</li>
                    <li><b>autorun.sh</b> - Po użyciu <a href="#autostart">.mksysctlstart</a></li>
                    <li>Inne Pliki (zdjęcia, nagrania, itp.)</li>
                    <li><b>setup</b> - Pliki konfiguracyjne</li>
                    <ul>
                        <li><b>setuplib.sh</b> - Instalacja Bibliotek</li>
                        <li><b>mkvenv.sh</b> - Utworzenie <a href="#autostart">venv</a></li>
                    </ul>
                </ul>
            </li>
        </ol>
        
        <br>

        <p align="right">Zdj.1 - Uruchomienie skryptu</p>
        <a href="Files/UbuntuSB.png"><img align="right" src="Files/UbuntuSB.png" width="40%" height="40%"></a>
        
        <h3 id="start">Pierwsze uruchomienie:</h3>
        <h5>Bot do uruchomienia wymaga:</h5>
        <ul type="square">
            <li>Python 3.9 lub nowszy</li>
            <li>Połączenie z internetem</li>
            <li>Zainstalowane wymagane biblioteki pythona (patrz - zawartość setup.sh/setuplib.sh)</li>
            <li>Dodanie do środowiska PATH plików FFmpeg - Tylko Windows (zobacz YT)</li>
            <li>System Operacyjny Linux(rekomendowany) / Windows / MacOS - Najlepiej 64bit</li>
            <li>setup.sh - wymaga komendy "dialog"</li>
        </ul>

        <br>
        
        Należy poprzez IDE, terminal albo inny program uruchomić skrypt - python3 lub setup.sh.<br>
        Jeżeli coś pójdzie nie tak, Bot powinien dać znać w czym problem<br>
        i poprosić o zatwierdzenie wykonania korekty albo porzuci uruchomienie/instalację.<br>
        Po uruchomieniu skryptu, Bot powinien się połączyć z Discordem i być gotowy do pracy.<br>
        [!] Jest możliwość zainstalowania bota poprzez plik .deb - należy pamiętać że bot zainstaluje się w /usr/share/serverbot. 
        Używaj komendy serverbot z sudo, jeśli chcesz skonfigurować <a href="#autostart">autostart</a>.<br>

        <br>

        Aktualne Komendy Bota można zobaczyć używając komendy .help

        <br>

        <h3 id="autostart">Uruchamianie Automatyczne:</h3>

        Korzystając z Bota może zechcesz aby automatycznie uruchamiał się wraz z systemem operacyjnym (Linux).<br>
        Aby to łatwo umożliwić istnieje komenda .mksysctlstart<br>
        Po wpisaniu komendy trzeba podać dodatkową wartość:<br><br>
        
        <b>def</b> -> tworzy domyślny plik autorun.sh w katalogu <a href="#dirs">Files</a>. Działa głównie na systemach opartych na Ubuntu <b>22.04</b> (Nie korzysta z utworzonego venv)<br><br>

        <b>venv</b> -> czasem przy instalacji modułów za pomocą pip3 może wyskoczyć błąd <i>externally managed pip</i>.<br>
        W tym przypadku należy utworzyć Wirtualne Środowisko Pythona (Virtual Environment/Venv)<br>
        Jeśli jeszcze go nie utworzyłeś - rekomendowane jest utworzenie go w głównym katalogu Bota (ServerBot).<br><br>
        Przykład: .mksysctl venv <- wykonujesz tą komendę na Discordzie gdy skrypt działa w głównym katalogu Bota.<br>
        UWAGA! Bot (a raczej setup.sh) jest przystosowany do nazwy katalogu z wirtualnym środowiskiem o nazwie ".venv".<br>
        Jeśli utworzyłeś ręcznie venv z inną nazwą katalogu, bot może się nie uruchomić!<br>
        Zalecane jest użycie opcji 4 z setup.sh -> Bez problemu wszystko zainstaluje i skonfiguruje jak trzeba.<br>
        Aby autostart zadziałał, należy ustawić pliki bota z uprawnieniami odczytu/zapisu/wykonania na 775 (r-x dla wszystkich, rwx dla właściciela i grupy). 
        Rekomenduję przenieść pliki Bota do katalogu /ServerBot (żeby nie był w innych katalogach). Nie instaluj bota w katalogu domowym jeśli chcesz uruchamiać go wraz z systemem.<br><br>

        <b><i>Jak utworzyć venv:</i></b><br>
        <ol>
            <li>znajdując się w głównym katalogu bota wpisz: <b>python3 -m venv .venv</b></li>
            <li>aby aktywować venv: <b>source .venv/bin/activate</b> (jako root)</li>
            <li>sprawdź wersję i lokalizację: <b>which python</b></li>
            <li>gdy już jesteś w venv, uruchom <b>setup.sh</b></li>
            <li>aby wyjść z venv wpisz w termianalu: <b>deactivate</b></li>
            <li>albo prościej - użyj opcji 4 w <b>setup.sh</b></li>
        </ol>

        <p>Pełna dokuntacja <a href="https://packaging.python.org/en/latest/guides/installing-using-pip-and-virtual-environments/">tutaj</a></p>

        <p align="right">Zdj. 2 - opcje setup.sh</p>
        <a href="Files/setupSB.png"><img align="right" src="Files/setupSB.png" width="35%" height="35%"></a>

        <h3 id="token">Tokeny</h3>
        Bot korzysta z tokenów: Discorda API, OpenAI oraz z ID użytkowników.<br>
        Aby bot się uruchomił należy wypełnić odpowiednimi danymi plik <b>.env</b><br><br>
        Schemat:<br>
        TOKEN="twój token"<br>
        AI_token="twój token"<br>
        admin_usr = ['twoje ID']<br>
        mod_usr = ['twoje ID']<br>
        dscserv_link = 'Link do Serwera Discord'<br>
        addstable = 'stable_link of Discord Bot'<br>
        addtesting = 'testing_link of Discord Bot'<br>
        service_monitor = 'True/False' - włącza komendę .service<br>
        service_list = 'Lista usług systemctl do monitorowania poprzez Discorda'<br>
        showmodulemessages = 'True/False' - wyświetla informacje o włączonych modułach Bota<br>
        ACLmodule = 'True/False' - Uruchamia funkcję <a href="#ACL">AdvancedChannelListener</a><br>
        aimodel = 'gemini-2.5-flash' - wybrany model językowy gemini<br>
        instructions = ['Instrukcje dla modelu językowego']<br><br>
        <h4>ID użytkownika</h4>
        Niektóre komendy korzystają z funkcji i danych związanych z twoim systemem operacyjnym,<br>
        więc wymagają uprawnień administratora do uruchomienia - chyba nie chcesz żeby ktoś ci usunął system!<br>
        Aby te komendy wykonać, należy podać w <b>admin_usr</b> ID uprawnionych użytkowników do wykonywania tych komend - to muszą być zaufane osoby, a najlepiej tylko ty!<br>
        Należy też podać <b>mod_usr</b> - pozwala na wykonywanie komend ingerujących w serwer itp.<br>
        To mogą być zaufani moderatorzy Serwera.

        <br>

        <h3 id="ffmpeg">Windows - instalacja FFmpeg</h3>
        <a href="https://www.ffmpeg.org/download.html">FFmpeg</a> odpowiada za odtwarzanie muzyki na Kanałach Głosowych. Na Windowsie instalacja FFmpeg wygląda inaczej niż na Linuksie.<br>
        Dla wygody uruchom skrypt <b>setup.bat</b> - po instalacji wszystkich wymaganych bibliotek pythona, pojawi się komunikat o konfiguracji
        FFmpeg. Należy pobrać .zip programu FFmpeg z oficjalnej strony <a href="https://github.com/BtbN/FFmpeg-Builds">GitHub</a>, najlepiej z podanego w skrypcie 
        <a href="https://github.com/BtbN/FFmpeg-Builds/releases/download/latest/ffmpeg-master-latest-win64-gpl-shared.zip">linku</a>. Po pobraniu należy wypakować pliki tak, aby 
        pliki .exe znajdowały się w lokalizacji C:\ffmpeg\bin. Jeśli chcesz wypakować w innym miejscu - edytuj skrypt! Po czym (w skrypcie) wciśnij enter, 
        aby ścieżkę z plikami FFmpeg dodać do PATH. Jeśli pojawi się komunikat o udanej operacji, uruchom ponownie system Windows.

        <br>

        <h3 id="modules">Moduły/Rozszerzenia Bota</h3>

        Bot posiada moduły/rozszerzenia rozszerzające funkcje, które można włączyć lub wyłączyć w pliku .env<br>
        Moduły są także dostępne jako osobne repozytoria (Boty Discord) na GitHubie.<br>
        <ul type="square">
            <li>
                <a id="ACL" href="https://github.com/kamile320/AdvancedChannelListener"><b>AdvancedChannelListener</b></a> - rejestruje wiadomości użytkowników na serwerze i zapisuje je w pliku ACL/[DiscordUserID].txt oraz wszystkie wiadomości w ACL/default/message.txt<br>
                Przydatny do monitorowania użytkowników na serwerze i weryfikowania kto jest kim. Może łamać prywatność użytkowników, więc używaj z rozwagą.<br>
                Jeśli nie zamierzasz używać tego modułu - ustaw w .env ACLmodule = 'False' (ustwaione domyślnie).
            </li>
            <li>
                <b>.service</b> - komenda pozwalająca na podgląd statusu usług systemctl na serwerze hostującym bota. Włącz ją w pliku .env ustawiając service_monitor = True oraz wpisując listę usług do service_list.
            </li>
        </ul>

        <br>

        <h3 id="ai">Komenda .ai</h3>
        Komenda .ai pozwala na rozmowę ze sztuczną inteligencją. Wykorzystuje api gemini firmy Google.<br>
        Wystarczy zdobyć token gemini (na stronie <a href="https://ai.google.dev/">Google AI dev</a>) i wpisać go do pliku .env w polu 'AI_token'.<br>
        W pliku .env możesz ustawić model językowy (domyślnie gemini-2.5-flash) w polu 'aimodel', oraz instrukcje dla modelu w polu 'instructions'.<br>
        Rekomenduję zostawić domyślną instrukcję ograniczającą limit odpowiedzi do 1500 znaków - długa odpowiedź może nie zostać wysłana na kanał discord i spowodować błąd.<br>

        <br>

        <h3 id="comma">Podstawowe Komendy:</h3>
        <table border>
            <tr valign="top" align="center">
                <td>
                    ======Chat======<br>
                    hello<br>
                    bye<br>
                    hi<br>
                    hello_there<br>
                </td>

                <td>
                    =========Converter=========<br>
                    binary {dec. number}<br>
                    hexa {dec. number}<br>
                    convert {type} {number}<br>
                </td>

                <td>
                    ========Fun========<br>
                    random<br>
                    banner<br>
                    botbanner<br>
                    blankthing<br>
                    apple<br>
                    ai<br>
                    badge<br>
                </td>

                <td>
                    ======Admin======<br>
                    ShutDown<br>
                    copylog<br>
                    bash<br>
                    rebuild<br>
                    mkshortcut<br>
                    mksysctlstart {mode}<br>
                    service<br>
                    pingip<br>
                </td>
            </tr>
            <tr valign="top" align="center">
                <td>
                    =====BotInfo=====<br>
                    manual {web/local}<br>
                    credits<br>
                    time<br>
                    ping<br>
                    release<br>
                    next_update<br>
                    issues<br>
                </td>

                <td>
                    ========FileManager========<br>
                    cd {directory}<br>
                    dir {mode}<br>
                    file {mode} {filename}<br>
                    touch {file} {content}<br>
                </td>

                <td>
                    ====VoiceChannel====<br>
                    join<br>
                    leave<br>
                    play {file dir}<br>
                    ytplay {type} {link}<br>
                    stop<br>
                    waiting<br>
                    micspam<br>
                    pause<br>
                </td>

                <td>
                    =====ModOnly=====<br>
                    testbot<br>
                    testos<br>
                    disks<br>
                    delete<br>
                    cleaner<br>
                    webreq<br>
                    kick<br>
                    ban<br>
                    unban<br>
                </td>
            </tr>
        </table>
    </div>
</body>
</html>